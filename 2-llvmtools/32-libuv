# Toolchain: libuv 1.39.0
# Source: https://dist.libuv.org/dist/v1.39.0/libuv-v1.39.0.tar.gz
# Build and install as cmlfs

export LDFLAGS=" -pthread"
NOCONFIGURE=1 ./autogen.sh

# Configure source with clang
CC=x86_64-pc-linux-musl-clang \
CXX=x86_64-pc-linux-musl-clang++ \
AR=llvm-ar \
AS=llvm-as \
RANLIB=llvm-ranlib \
LD=ld.lld \
STRIP=llvm-strip \
./configure --build=${TARGET_TRUPLE} \
            --host=${TARGET_TRUPLE}  \
            --prefix=/llvmtools      \
            --disable-static

# Build and install to toolchain
make && make install

unset LDFLAGS
