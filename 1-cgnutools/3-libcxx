cd libcxx

cmake -B build -G Ninja \
      -DCMAKE_INSTALL_PREFIX=${LIBCXX_GNU_INSTALL_PATH} \
      -DLIBCXX_ENABLE_SHARED=ON \
      -DLIBCXX_ENABLE_STATIC=ON  \
      -DLIBCXX_HAS_MUSL_LIBC=ON \
      -DLIBCXX_HAS_GCC_S_LIB=OFF \
      -DLIBCXXABI_ENABLE_STATIC=ON \
      -DLIBCXXABI_USE_LLVM_UNWINDER=ON \
      -DLIBCXX_CXX_ABI=libcxxabi \
      -DLIBCXX_CXX_ABI_INCLUDE_PATHS="${LLVMSRC}/libcxxabi/include"
      -DLLVM_PATH="${LLVMSRC}/llvm"

ninja -C build         && \
ninja -C build install && \
rm -rf build           && \

# Link libcxx to final toolchain. Libraries will be replaced once
# libcxx is rebuilt with clang
ln -s ${LIBCXX_GNU_INSTALL_PATH}/lib/*      /llvmtools/lib/
ln -s ${LIBCXX_GNU_INSTALL_PATH}/include/*  /llvmtools/include/

