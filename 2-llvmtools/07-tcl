# Tool Chain: TCL
# Source: https://downloads.sourceforge.net/tcl/tcl8.6.10-src.tar.gz 
# Build and install as cmlfs
# Can be optional: Package used for testing final system packages

# Set the environment to use stage1 clang & friends if not done already.
export CC=${TARGET_TRUPLE}-clang
export CXX=${TARGET_TRUPLE}-clang++
export AR=llvm-ar
export AS=llvm-as
export RANLIB=llvm-ranlib
export LD=ld.lld
export STRIP=llvm-strip

# Configure source
cd unix
ac_cv_func_strtod=yes \
tcl_cv_strtod_buggy=1 \
./configure --build=${TARGET_TRUPLE} \
            --host=${TARGET_TRUPLE} \
            --prefix=/llvmtools

# Build and install to toolchain
make && make install

# Install Headers and create link
chmod -v u+w /llvmtools/lib/libtcl8.6.so
make install-private-headers
ln -sv tclsh8.6 /llvmtools/bin/tclsh


