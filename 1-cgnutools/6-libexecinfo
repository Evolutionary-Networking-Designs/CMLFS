cd libexecinfo

patch -Np1 -i ../patches/libexecinfo-alpine/10-execinfo.patch
patch -Np1 -i ../patches/libexecinfo-alpine/20-define-gnu-source.patch
patch -Np1 -i ../patches/libexecinfo-alpine/30-linux-makefile.patch

cc=${CMLFS_TARGET}-gcc CFLAGS=" -fno-omit-frame-pointer" make

install -D -m755 -v execinfo.h       /cgnutools/include/execinfo.h     && \
install -D -m755 -v stacktraverse.h  /cgnutools/include/stacktraverse.h && \
install -D -m755 -v libexecinfo.a    /cgnutools/lib/libexecinfo.a      && \
install -D -m755 -v libexecinfo.so.1 /cgnutools/lib/libexecinfo.so.1   && \
ln -sv /cgnutools/lib/libexecinfo.so.1     /cgnutools/lib/libexecinfo.so

# Also needed by cross-tools when cross-compiling clang
install -D -m755 -v execinfo.h       /cross-tools/include/execinfo.h     && \
install -D -m755 -v stacktraverse.h  /cross-tools/include/stacktraverse.h && \
install -D -m755 -v libexecinfo.a    /cross-tools/lib/libexecinfo.a      && \
install -D -m755 -v libexecinfo.so.1 /cross-tools/lib/libexecinfo.so.1  

