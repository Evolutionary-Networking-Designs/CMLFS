# Toolchain: Ncurses-6.2
# Source: http://ftp.gnu.org/gnu/ncurses/ncurses-6.2.tar.gz
# Build and install as cmlfs

# Set the environment to use stage1 clang & friends if not done already.export CC=${TARGET_TRUPLE}-clang
export CXX=${TARGET_TRUPLE}-clang++
export AR=llvm-ar
export AS=llvm-as
export RANLIB=llvm-ranlib
export LD=ld.lld
export STRIP=llvm-strip

# Ensure that gawk is found first during configuration: 
sed -i s/mawk// configure

# Configure source
./configure --prefix=/llvmtools \
            --build=${TARGET_TRUPLE} \
            --host=${TARGET_TRUPLE} \
            --with-shared   \
            --without-debug \
            --without-ada   \
            --enable-widec  \
            --enable-overwrite

# Build and install to toolchain
make && make install

# Bash build expects to find libcurses.so:
ln -sv libncursesw.so.6.2 /llvmtools/lib/libcurses.so
